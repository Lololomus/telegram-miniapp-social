/* css/components/tags.css */
/* Единые стили для всех тегов навыков */

/* --- Базовый стиль тега --- */
.skill-tag {
  /* Внутренние переменные */
  --tag-height: calc(28px * var(--ui-scale, 1));
  --tag-font-size: calc(13px * var(--ui-scale, 1));
  --tag-padding-x: calc(12px * var(--ui-scale, 1));

  /* ✅ ГЕОМЕТРИЯ (Фикс дергания): */
  /* Включаем рамку и отступы в общую высоту */
  box-sizing: border-box;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  padding: 0 var(--tag-padding-x);
  height: var(--tag-height);
  border-radius: 8px;

  font-size: var(--tag-font-size);
  font-weight: 500;
  line-height: normal;

  text-decoration: none;
  white-space: nowrap;

  transition: background-color 0.2s ease,
              color 0.2s ease,
              border-color 0.2s ease,
              opacity 0.2s ease,
              transform 0.1s ease;

  /* ✅ БАЗОВАЯ РАМКА: 1.5px прозрачная.
     Она есть у всех тегов во всех темах, чтобы размер был одинаковым. */
  border: 1.5px solid transparent;
}

/* --- 1. Тег для отображения (Профиль, Лента) --- */
.skill-tag--display {
    /* Светлая тема: Синий фон, белый текст */
    background-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
    color: var(--main-button-text-color, var(--tg-theme-button-text-color, #ffffff));
    /* Рамка остается прозрачной (или совпадает с фоном) */
    border-color: transparent;
    opacity: 0.85;
}

/* --- 2. Тег для фильтра (Лента) --- */
.skill-tag--filter {
  cursor: pointer;
  flex-shrink: 0;
  /* ✅ ИЗМЕНЕНИЕ: Убираем margin-right, так как используем gap в контейнере */
  margin-right: 0; 
  opacity: 0.9;

  --tag-filter-height: calc(32px * var(--ui-scale, 1));
  height: var(--tag-filter-height);
  
  /* ✅ ИЗМЕНЕНИЕ: Квадратная форма */
  border-radius: 8px; /* БЫЛО: calc(var(--tag-filter-height) / 2) */
  
  padding: 0 var(--tag-padding-x);

  background-color: transparent;
  border-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
  color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
}

.skill-tag--filter:last-child { margin-right: 0; }
.skill-tag--filter:hover { opacity: 0.7; }

.skill-tag--filter.is-selected {
  /* Активный фильтр: Синий фон */
  background-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
  color: var(--main-button-text-color, var(--tg-theme-button-text-color, #ffffff));
  border-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
  opacity: 1;
}
.skill-tag--filter.is-selected:hover { opacity: 1; }

/* --- 3. Тег для выбора (Модалка) --- */
.skill-tag--selectable {
  cursor: pointer;
  --tag-selectable-height: calc(34px * var(--ui-scale, 1));
  height: var(--tag-selectable-height);
  padding: 0 calc(14px * var(--ui-scale, 1));
  border-radius: 10px;
  font-size: calc(14px * var(--ui-scale, 1));

  background-color: var(--secondary-bg-color, var(--tg-theme-secondary-bg-color, #efefef));
  color: var(--main-text-color, var(--tg-theme-text-color, #000000));
}

.skill-tag--selectable.selected {
  background-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
  color: var(--main-button-text-color, var(--tg-theme-button-text-color, #ffffff));
  border-color: var(--main-button-color, var(--tg-theme-button-color, #007aff));
}
.skill-tag--selectable:active { transform: scale(0.97); }


/* === ТЕМЫ (ВОЗВРАЩАЕМ СТИЛИ) === */

/* --- Темная тема --- */

/* Теги отображения: Темный фон + Синяя рамка */
body.theme-dark .skill-tag--display {
    background-color: var(--main-bg-color, #1c1c1d);
    color: var(--main-button-color, #0a84ff);
    
    /* ✅ ВАЖНО: Красим рамку, которая уже зарезервирована в базовом классе.
       Размер тега НЕ изменится, он останется 28px. */
    border-color: var(--main-button-color, #0a84ff);
    
    opacity: 1;
}

/* Фильтры в темной теме */
body.theme-dark .skill-tag--filter {
    border-color: var(--main-button-color, #0a84ff);
    color: var(--main-button-color, #0a84ff);
    background-color: var(--secondary-bg-color, #2c2c2e);
    opacity: 0.9;
}
body.theme-dark .skill-tag--filter:hover { opacity: 0.7; }
body.theme-dark .skill-tag--filter.is-selected {
    background-color: var(--main-button-color, #0a84ff);
    color: var(--main-button-text-color, #ffffff);
    border-color: var(--main-button-color, #0a84ff);
    opacity: 1;
}

/* Теги выбора в темной теме */
body.theme-dark .skill-tag--selectable {
    background-color: var(--secondary-bg-color, #2c2c2e);
    color: var(--main-text-color, #ffffff);
}
body.theme-dark .skill-tag--selectable.selected {
    background-color: var(--main-button-color, #0a84ff);
    color: var(--main-button-text-color, #ffffff);
    border-color: var(--main-button-color, #0a84ff);
}


/* --- Кастомная тема --- */
body.theme-custom .skill-tag--display {
    background-color: var(--main-bg-color);
    color: var(--main-button-color);
    border-color: var(--main-button-color);
    opacity: 1;
}
body.theme-custom .skill-tag--filter {
     border-color: var(--main-button-color);
     color: var(--main-button-color);
     background-color: var(--secondary-bg-color);
}
body.theme-custom .skill-tag--filter.is-selected {
     background-color: var(--main-button-color);
     color: var(--main-button-text-color);
}
body.theme-custom .skill-tag--selectable {
    background-color: var(--secondary-bg-color);
    color: var(--main-text-color);
}
body.theme-custom .skill-tag--selectable.selected {
    background-color: var(--main-button-color);
    color: var(--main-button-text-color);
    border-color: var(--main-button-color);
}

/* --- Анимации --- */
.skill-tag-fade-in { animation: skillTagFadeIn 0.3s ease-out both; }
.skill-tag-fade-out { animation: skillTagFadeOut 0.25s ease-out forwards; }


/* --- Glass-тема (Стекло) --- */
body.theme-glass-overlay .skill-tag--display {
    background-color: var(--glass-bg-secondary);
    border: var(--glass-border);
    color: var(--main-text-color);
    opacity: 0.9;
}
body.theme-light.theme-glass-overlay .skill-tag--display {
    background-color: rgba(255,255,255, 0.4);
    border: 1px solid rgba(255,255,255, 0.7);
    color: #000;
    opacity: 1;
}
body.theme-dark.theme-glass-overlay .skill-tag--display {
    background-color: rgba(60,60,60, 0.5);
    border: 1px solid rgba(255,255,255, 0.1);
    color: #fff;
    opacity: 1;
}
body.theme-glass-overlay .skill-tag--filter {
    background-color: var(--glass-bg-input);
    border: var(--glass-border);
    color: var(--main-text-color);
    opacity: 0.8;
}
body.theme-glass-overlay .skill-tag--filter.is-selected {
    background-color: var(--main-button-color);
    color: var(--main-button-text-color);
    border-color: var(--main-button-color);
    opacity: 1;
}
body.theme-glass-overlay .skill-tag--selectable {
    background-color: var(--glass-bg-input);
    border: var(--glass-border);
    color: var(--main-text-color);
    opacity: 0.9;
    border-radius: 10px;
}
body.theme-glass-overlay .skill-tag--selectable.selected {
    background-color: var(--main-button-color);
    color: var(--main-button-text-color);
    border-color: var(--main-button-color);
    opacity: 1;
}

/* --- СТИЛЬ ДЛЯ КНОПКИ "ВСЕ" --- */

/* Когда "Все" активно: Белый фон, Черный текст (High Contrast) */
.skill-tag--filter.is-all.is-selected {
    background-color: #ffffff !important;
    color: #000000 !important;
    border-color: #ffffff !important;
    font-weight: 700;
    box-shadow: 0 0 15px rgba(255, 255, 255, 0.3); /* Свечение */
}

/* В светлой теме инвертируем (Черный фон, белый текст) */
body.theme-light .skill-tag--filter.is-all.is-selected {
    background-color: #000000 !important;
    color: #ffffff !important;
    border-color: #000000 !important;
}

/* Немного отделим кнопку "Все" от остальных отступом справа */
.skill-tag--filter.is-all {
    margin-right: 4px;
}